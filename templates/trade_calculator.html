<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Trade Calculator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #0b1120;
            color: #e5e7eb;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        .container {
            background: #020617;
            border-radius: 12px;
            padding: 20px 24px;
            margin: 24px;
            max-width: 480px;
            width: 100%;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6);
            border: 1px solid #1f2937;
        }

        h1 {
            font-size: 22px;
            margin-bottom: 8px;
            text-align: center;
        }

        p.subtitle {
            font-size: 13px;
            color: #9ca3af;
            text-align: center;
            margin-bottom: 18px;
        }

        label {
            display: block;
            font-size: 14px;
            margin-bottom: 6px;
        }

        select,
        input[type="number"] {
            width: 100%;
            padding: 8px 10px;
            margin-bottom: 14px;
            border-radius: 6px;
            border: 1px solid #374151;
            background: #020617;
            color: #e5e7eb;
            box-sizing: border-box;
        }

        select:focus,
        input:focus {
            outline: none;
            border-color: #22c55e;
        }

        .row {
            margin-bottom: 8px;
        }

        button {
            width: 100%;
            padding: 10px;
            margin-top: 6px;
            border-radius: 8px;
            border: none;
            background: #629274;
            color: #000;
            font-weight: 600;
            cursor: pointer;
            font-size: 15px;
        }

        #tradebtn {
            text-decoration: none !important;
        }


        .backbutton {
            display: inline-block;
            /* the real fix */
            width: auto;
            /* prevent full-width expansion */
            padding: 8px 16px;
            background: #86a792;
            border-radius: 8px;
            border: none;
            color: #000;
            font-weight: 600;
            font-size: 15px;
            cursor: pointer;
            text-decoration: none;
        }



        button:hover {
            background: #188834;
        }

        .result {
            margin-top: 18px;
            padding: 12px;
            border-radius: 8px;
            background: #020617;
            border: 1px solid #374151;
            font-size: 14px;
            white-space: pre-line;
        }

        .hidden {
            display: none;
        }

        .small {
            font-size: 12px;
            color: #9ca3af;
            margin-top: 4px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Trade Calculator</h1>
        <p class="subtitle">Quickly get upside, downside, RRR, target or SL levels.</p>

        <!-- Mode Selection -->
        <div class="row">
            <label for="mode">Select Mode</label>
            <select id="mode">
                <option value="stats">1. Trade Stats (Upside %, Downside %, RRR)</option>
                <option value="upside">2. Upside % → Target Price</option>
                <option value="downside">3. Downside % → Stop-loss Price</option>
            </select>
        </div>

        <!-- Common Buy Price -->
        <div class="row">
            <label for="buyPrice">Buy Price</label>
            <input type="number" id="buyPrice" step="0.01" min="0" placeholder="e.g. 117">
        </div>

        <!-- Mode: Trade Stats -->
        <div id="statsFields">
            <div class="row">
                <label for="targetPrice">Target Price</label>
                <input type="number" id="targetPrice" step="0.01" min="0" placeholder="e.g. 135">
            </div>
            <div class="row">
                <label for="stopLossPrice">Stop-loss Price</label>
                <input type="number" id="stopLossPrice" step="0.01" min="0" placeholder="e.g. 98">
            </div>
        </div>

        <!-- Mode: Upside -->
        <div id="upsideFields" class="hidden">
            <div class="row">
                <label for="upsidePercent">Upside %</label>
                <input type="number" id="upsidePercent" step="0.01" placeholder="e.g. 10">
            </div>
        </div>

        <!-- Mode: Downside -->
        <div id="downsideFields" class="hidden">
            <div class="row">
                <label for="downsidePercent">Downside %</label>
                <input type="number" id="downsidePercent" step="0.01" placeholder="e.g. 10">
            </div>
        </div>

        <button id="calcBtn">Calculate</button>

        <div class="result" id="resultBox"></div>
        <div class="small">Note: All calculations are approximate and for educational use only.</div>
        <button type="backbutton" class="back-btn" onclick="goBack()">⬅ Back</button>
    </div>

    <script>
        const modeSelect = document.getElementById('mode');
        const statsFields = document.getElementById('statsFields');
        const upsideFields = document.getElementById('upsideFields');
        const downsideFields = document.getElementById('downsideFields');
        const resultBox = document.getElementById('resultBox');

        function showFields() {
            const mode = modeSelect.value;
            statsFields.classList.add('hidden');
            upsideFields.classList.add('hidden');
            downsideFields.classList.add('hidden');

            if (mode === 'stats') {
                statsFields.classList.remove('hidden');
            } else if (mode === 'upside') {
                upsideFields.classList.remove('hidden');
            } else if (mode === 'downside') {
                downsideFields.classList.remove('hidden');
            }
            resultBox.textContent = '';
        }

        modeSelect.addEventListener('change', showFields);

        function tradeStats(buy, target, stoploss) {
            const upsidePct = ((target - buy) / buy) * 100;
            const downsidePct = ((buy - stoploss) / buy) * 100;
            const rrr = downsidePct === 0 ? Infinity : upsidePct / downsidePct;

            return {
                upsidePct: Number.isFinite(upsidePct) ? upsidePct.toFixed(2) : 'NaN',
                downsidePct: Number.isFinite(downsidePct) ? downsidePct.toFixed(2) : 'NaN',
                rrr: Number.isFinite(rrr) ? rrr.toFixed(2) : '∞'
            };
        }

        function upsidePrice(buy, percent) {
            return (buy * (1 + percent / 100)).toFixed(2);
        }

        function downsidePrice(buy, percent) {
            return (buy * (1 - percent / 100)).toFixed(2);
        }

        document.getElementById('calcBtn').addEventListener('click', function () {
            const mode = modeSelect.value;
            const buy = parseFloat(document.getElementById('buyPrice').value);

            if (isNaN(buy) || buy <= 0) {
                resultBox.textContent = 'Enter a valid Buy Price.';
                return;
            }

            if (mode === 'stats') {
                const target = parseFloat(document.getElementById('targetPrice').value);
                const stoploss = parseFloat(document.getElementById('stopLossPrice').value);

                if (isNaN(target) || isNaN(stoploss) || target <= 0 || stoploss <= 0) {
                    resultBox.textContent = 'Enter valid Target and Stop-loss prices.';
                    return;
                }

                const stats = tradeStats(buy, target, stoploss);
                resultBox.textContent =
                    '--- Trade Statistics ---\n' +

                    `Target Price: ${target}\n` +
                    `Stop-loss Price: ${stoploss}\n\n` +
                    `Upside %: ${stats.upsidePct}%\n` +
                    `Downside %: ${stats.downsidePct}%\n` +
                    `Risk-to-Reward Ratio: ${stats.rrr}`;
            }

            else if (mode === 'upside') {
                const upPct = parseFloat(document.getElementById('upsidePercent').value);
                if (isNaN(upPct)) {
                    resultBox.textContent = 'Enter a valid Upside %.';
                    return;
                }
                const targetPrice = upsidePrice(buy, upPct);
                resultBox.textContent =
                    '--- Upside Price Calculator ---\n' +
                    `Buy Price: ${buy}\n` +
                    `Upside %: ${upPct}%\n` +
                    `Target Price: ${targetPrice}`;
            }

            else if (mode === 'downside') {
                const downPct = parseFloat(document.getElementById('downsidePercent').value);
                if (isNaN(downPct)) {
                    resultBox.textContent = 'Enter a valid Downside %.';
                    return;
                }
                const slPrice = downsidePrice(buy, downPct);
                resultBox.textContent =
                    '--- Downside Price Calculator ---\n' +
                    `Buy Price: ${buy}\n` +
                    `Downside %: ${downPct}%\n` +
                    `Stop-loss Price: ${slPrice}`;
            }

        });
        function goBack() {
            window.history.back();
        }
    </script>
</body>

</html>