<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stock Market Quiz</title>

  <style>
    :root {
      --bg: #000;
      --card: #111;
      --muted: #9a9a9a;
      --accent: #00b7ff;
      --ok: #2ecc71;
      --err: #ff6b6b;
      --glass: #1a1a1a;
    }

    body {
      background: var(--bg);
      color: #fff;
      font-family: Arial, Helvetica, sans-serif;
      text-align: center;
      padding: 30px;
      margin: 0;
    }

    /* Back Button */
    .back-btn {
      position: fixed;
      top: 20px;
      left: 20px;
      padding: 10px 16px;
      background: #1e85f4;
      color: #fff;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 700;
      border: none;
      z-index: 1000;
    }

    .back-btn:hover {
      filter: brightness(0.9);
    }

    h2 {
      color: var(--accent);
      margin-top: 60px;
    }

    .quiz-card {
      width: 92%;
      max-width: 980px;
      background: var(--card);
      border-radius: 12px;
      padding: 20px;
      margin: 40px auto 120px;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6);
      border: 1px solid rgba(255, 255, 255, 0.05);
      text-align: left;
    }

    .question {
      background: var(--glass);
      margin: 14px 0;
      padding: 14px;
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.05);
    }

    label {
      display: block;
      cursor: pointer;
      padding: 6px 8px;
      border-radius: 6px;
      margin-bottom: 6px;
      border: 1px solid transparent;
    }

    input[type="radio"] {
      margin-right: 10px;
    }

    /* Correct / Incorrect states */
    label.correct {
      background: rgba(46, 204, 113, 0.12);
      color: var(--ok);
      border-color: rgba(46, 204, 113, 0.3);
    }

    label.incorrect {
      background: rgba(255, 107, 107, 0.12);
      color: var(--err);
      border-color: rgba(255, 107, 107, 0.3);
    }

    .correct-answer {
      font-size: 13px;
      color: var(--ok);
      margin-top: 6px;
    }

    .explain {
      font-size: 12px;
      color: var(--muted);
    }

    .controls {
      text-align: center;
      margin-top: 16px;
    }

    .btn-primary {
      background: #1e85f4;
      color: #fff;
      padding: 10px 18px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 700;
    }

    .btn-primary:hover {
      filter: brightness(0.95);
    }

    .result-box {
      margin-top: 18px;
      text-align: center;
      color: #fff;
    }

    .score {
      font-size: 20px;
      font-weight: 800;
      color: var(--accent);
      margin-bottom: 8px;
    }
  </style>
</head>

<body>
  <button class="back-btn" onclick="window.location.href='/'">â¬… Back</button>

  <h2>ðŸ§  Stock Market Knowledge Test</h2>

  <div class="quiz-card">
    <form id="quizForm"></form>

    <div class="controls">
      <button id="submitBtn" class="btn-primary" type="button">Submit</button>
      <button
        id="retakeBtn"
        class="btn-primary"
        type="button"
        style="margin-left:10px; display:none; background:#333;"
      >
        Retake (New Set)
      </button>
    </div>

    <div id="result" class="result-box"></div>
  </div>

  <script>
    // ----------- QUESTION SETS -------------
    const setA = [
      { q: "What does IPO stand for?", options: ["Initial Public Offering", "Internal Price Order", "Investment Purchase Option"], answer: 0 },
      { q: "Which exchange is NOT in India?", options: ["BSE", "NSE", "NYSE"], answer: 2 },
      { q: "P/E stands for:", options: ["Price to Equity", "Price to Earnings", "Profit to Expense"], answer: 1 },
      { q: "Momentum indicator?", options: ["RSI", "EPS", "P/B Ratio"], answer: 0 },
      { q: "Defensive stock example:", options: ["FMCG", "IT", "Real Estate"], answer: 0 },
      { q: "Bear market means:", options: ["Prices rising", "Prices falling", "Stable market"], answer: 1 },
      { q: "Diversification means:", options: ["One stock", "Spread investments", "Only cash"], answer: 1 },
      { q: "Cyclical sector:", options: ["Automobile", "Pharma", "Utilities"], answer: 0 },
      { q: "Market cap refers to:", options: ["Total debt", "Total share value", "Profit margin"], answer: 1 },
      { q: "Which uses financial statements?", options: ["Technical", "Fundamental", "Sentiment"], answer: 1 }
    ];

    const setB = [
      { q: "Blue-chip stock:", options: ["Stable large company", "Penny stock", "New IPO"], answer: 0 },
      { q: "Order that executes at best price:", options: ["Limit Order", "Market Order", "Stop Loss"], answer: 1 },
      { q: "Top 50 companies index:", options: ["Sensex", "Nifty50", "BankNifty"], answer: 1 },
      { q: "EPS stands for:", options: ["Earnings Per Share", "Equity Price Spread", "Effective Profit Statement"], answer: 0 },
      { q: "Volatility indicator:", options: ["Bollinger Bands", "ROE", "Debt Ratio"], answer: 0 },
      { q: "Defensive sector:", options: ["Pharma", "Automobile", "Real Estate"], answer: 0 },
      { q: "SIP stands for:", options: ["Systematic Investment Plan", "Stock Increment Program", "Secure Investment Pool"], answer: 0 },
      { q: "After-hours market:", options: ["Cash", "Derivatives", "After-Market Session"], answer: 2 },
      { q: "CAGR stands for:", options: ["Compound Annual Growth Rate", "Asset Growth Rate", "Gross Return"], answer: 0 },
      { q: "Reversal pattern:", options: ["Head & Shoulders", "Bull Flag", "Pennant"], answer: 0 }
    ];

    const setC = [
      { q: "NAV stands for:", options: ["Net Asset Value", "New Average Value", "Nominal Value"], answer: 0 },
      { q: "Sector benefits from low interest:", options: ["IT", "Banking", "Real Estate"], answer: 2 },
      { q: "ROE measures:", options: ["Return on Equity", "Rate of Earnings", "Risk of Equity"], answer: 0 },
      { q: "Strong buying candle:", options: ["Hammer", "Marubozu", "Doji"], answer: 1 },
      { q: "NOT a mutual fund:", options: ["Debt Fund", "Equity Fund", "Crypto Fund"], answer: 2 },
      { q: "Most volatile:", options: ["Large-cap", "Mid-cap", "Small-cap"], answer: 2 },
      { q: "Short selling means:", options: ["Selling borrowed shares", "Selling below price", "Selling old shares"], answer: 0 },
      { q: "Fear index:", options: ["RSI", "VIX", "MACD"], answer: 1 },
      { q: "Company value:", options: ["Market Cap", "EBITDA", "Dividend Yield"], answer: 0 },
      { q: "Breakout sign:", options: ["MACD", "RSI", "Volume Surge"], answer: 2 }
    ];

    const setD = [
      { q: "What does DMA stand for in stock markets?", options: ["Direct Market Access", "Daily Moving Average", "Derivative Market Agreement"], answer: 0 },
      { q: "Which instrument gives the RIGHT but NOT obligation to buy?", options: ["Futures Contract", "Call Option", "Short Sell"], answer: 1 },
      { q: "Circuit limit prevents:", options: ["Extreme price movement", "Order cancellation", "Dividend payout"], answer: 0 },
      { q: "Which is a leading indicator?", options: ["MACD", "RSI", "Volume"], answer: 1 },
      { q: "Which index tracks BANKING stocks?", options: ["Bank Nifty", "Sensex", "Nifty 200"], answer: 0 },
      { q: "Which investment is typically lowest risk?", options: ["Small-cap stocks", "Corporate bonds", "Crypto"], answer: 1 },
      { q: "What does bonus issue do?", options: ["Increases share count", "Increases market cap", "Increases cash in company"], answer: 0 },
      { q: "EV/EBITDA is used for:", options: ["Valuation", "Momentum tracking", "Liquidity analysis"], answer: 0 },
      { q: "Which is a bearish pattern?", options: ["Double Top", "Bull Flag", "Cup & Handle"], answer: 0 },
      { q: "Which type of stock is most sensitive to interest rates?", options: ["Banking", "IT", "Real Estate"], answer: 2 }
    ];

    const allSets = [setA, setB, setC, setD];
    const randSet = () => allSets[Math.floor(Math.random() * allSets.length)];

    const form = document.getElementById("quizForm");
    const resultBox = document.getElementById("result");
    const submitBtn = document.getElementById("submitBtn");
    const retakeBtn = document.getElementById("retakeBtn");

    let questions = [];

    function loadQuiz() {
      form.innerHTML = "";
      resultBox.innerHTML = "";
      submitBtn.style.display = "inline-block";
      retakeBtn.style.display = "none";

      questions = randSet();

      questions.forEach((q, i) => {
        const wrap = document.createElement("div");
        wrap.className = "question";
        wrap.innerHTML = `<strong>Q${i + 1}. ${q.q}</strong>`;

        q.options.forEach((opt, j) => {
          wrap.innerHTML += `
            <label data-q="${i}" data-opt="${j}">
              <input type="radio" name="q${i}" value="${j}"> ${opt}
            </label>`;
        });

        form.appendChild(wrap);
      });
    }

    function submitQuiz() {
      let score = 0;

      questions.forEach((q, i) => {
        const selected = document.querySelector(`input[name="q${i}"]:checked`);
        const chosen = selected ? parseInt(selected.value) : -1;

        const labels = document.querySelectorAll(`label[data-q="${i}"]`);

        labels.forEach(lbl => {
          const opt = parseInt(lbl.dataset.opt);
          if (opt === q.answer) lbl.classList.add("correct");
          if (opt === chosen && chosen !== q.answer) lbl.classList.add("incorrect");
        });

        if (chosen === q.answer) {
          score++;
        } else {
          const correctText = q.options[q.answer];
          const msg = document.createElement("div");
          msg.className = "correct-answer";
          msg.innerText = "Correct answer: " + correctText;
          document.querySelectorAll(".question")[i].appendChild(msg);
        }
      });

      // Disable all radios
      document
        .querySelectorAll("input[type=radio]")
        .forEach(i => (i.disabled = true));

      resultBox.innerHTML =
        `<div class="score">Your Score: ${score}/${questions.length}</div>`;

      submitBtn.style.display = "none";
      retakeBtn.style.display = "inline-block";
    }

    submitBtn.onclick = submitQuiz;
    retakeBtn.onclick = loadQuiz;

    loadQuiz();
  </script>
</body>
</html>
